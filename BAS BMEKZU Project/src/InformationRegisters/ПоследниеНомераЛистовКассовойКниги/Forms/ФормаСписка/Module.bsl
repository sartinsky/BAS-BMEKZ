
////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Отбор.Свойство("СтруктурнаяЕдиница") Тогда
		СтруктурнаяЕдиницаОтбор	= Параметры.Отбор.СтруктурнаяЕдиница;
	Иначе
		СтруктурнаяЕдиницаОтбор	= БухгалтерскийУчетПереопределяемый.ПолучитьЗначениеПоУмолчанию("ОсновнаяОрганизация");
	КонецЕсли;
	
	Если Параметры.Отбор.Свойство("Валюта") Тогда
		ВалютаОтбор	= Параметры.Отбор.Валюта;
		Параметры.Отбор.Удалить("Валюта");
	Иначе
		ВалютаОтбор	= ОбщегоНазначенияБПВызовСервераПовтИсп.ПолучитьВалютуРегламентированногоУчета();
	КонецЕсли;
	
	ОбщегоНазначенияБПВызовСервера.УстановитьОтборПоОсновнойОрганизации(ЭтаФорма,, "СтруктурнаяЕдиница");
	
	Элементы.СтруктурнаяЕдиница.Видимость = НЕ ЗначениеЗаполнено(СтруктурнаяЕдиницаОтбор);
	Элементы.Валюта.Видимость			  = НЕ ЗначениеЗаполнено(ВалютаОтбор);

КонецПроцедуры


////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ПОЛЕЙ ФОРМЫ

&НаКлиенте
Процедура СтруктурнаяЕдиницаОтборПриИзменении(Элемент)
	
	ОтборыСписковКлиентСервер.ИзменитьЭлементОтбораСписка(Список, "СтруктурнаяЕдиница", СтруктурнаяЕдиницаОтбор, ЗначениеЗаполнено(СтруктурнаяЕдиницаОтбор));
	Элементы.СтруктурнаяЕдиница.Видимость = НЕ ЗначениеЗаполнено(СтруктурнаяЕдиницаОтбор);
	
КонецПроцедуры

&НаКлиенте
Процедура ВалютаОтборПриИзменении(Элемент)
	
	ОтборыСписковКлиентСервер.ИзменитьЭлементОтбораСписка(Список, "Валюта", ВалютаОтбор, ЗначениеЗаполнено(ВалютаОтбор));
	Элементы.Валюта.Видимость = НЕ ЗначениеЗаполнено(ВалютаОтбор);

КонецПроцедуры



