
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
		
	МассивОтбора = Новый Массив;
	
	ОсновнаяОрганизация = БухгалтерскийУчетПереопределяемый.ПолучитьЗначениеПоУмолчанию("ОсновнаяОрганизация");
	ПустаяОрганизация	= Справочники.Организации.ПустаяСсылка();
	
	Если ЗначениеЗаполнено(ОсновнаяОрганизация) Тогда
		МассивОтбора.Добавить(ОсновнаяОрганизация);
		МассивОтбора.Добавить(ПустаяОрганизация);
		ОбщегоНазначенияБПВызовСервера.УстановитьОтборПоОсновнойОрганизации(ЭтаФорма, , , МассивОтбора);
	КонецЕсли;
	
	ПустойДоговор = БухгалтерскийУчетПереопределяемый.ПолучитьПустоеЗначениеДоговора();
	
КонецПроцедуры

&НаКлиенте
Процедура ОбработкаОповещения(ИмяСобытия, Параметр, Источник)
	
	Если ИмяСобытия = "ИзменениеОсновнойОрганизации" Тогда
		
		МассивОтбора = Новый Массив;
				
		ПустаяОрганизация = ПредопределенноеЗначение("Справочник.Организации.ПустаяСсылка");
		Если ЗначениеЗаполнено(Параметр) Тогда
			МассивОтбора.Добавить(Параметр);
			МассивОтбора.Добавить(ПустаяОрганизация);
		КонецЕсли;
		
		ОбщегоНазначенияБПКлиент.ИзменитьОтборПоОсновнойОрганизации(Список, , МассивОтбора);
		
	КонецЕсли;

КонецПроцедуры

&НаКлиенте
// Процедура обработчик события "ПриНачалеРедактирования" элемента Список
//
Процедура СписокПриНачалеРедактирования(Элемент, НоваяСтрока, Копирование)
	
	Если НоваяСтрока Тогда

		СтрокаТЧ = Элементы.Список.ТекущиеДанные;
		СтрокаТЧ.Организация = ОсновнаяОрганизация;

	КонецЕсли;

КонецПроцедуры


&НаКлиенте
// Процедура очищает договор в текущей строке
//
Процедура ОчиститьДоговор()

	СтрокаТЧ = Элементы.Список.ТекущиеДанные;
	Если СтрокаТЧ = Неопределено Тогда
		Возврат;
	КонецЕсли;

	СтрокаТЧ.Договор = ПустойДоговор;

КонецПроцедуры // ОчиститьДоговор()


&НаКлиенте
// Процедура обработчик события "ПриИзменении" поля Организация
//
Процедура ОрганизацияПриИзменении(Элемент)
	
	ОчиститьДоговор();

КонецПроцедуры


&НаКлиенте
// Процедура обработчик события "ПриИзменении" поля Контрагент
//
Процедура КонтрагентПриИзменении(Элемент)
	
	ОчиститьДоговор();

КонецПроцедуры


&НаКлиенте
// Процедура обработчик события "ПриИзменении" поля ВидРасчетовПоДоговору
//
Процедура ВидРасчетовПоДоговоруПриИзменении(Элемент)
	
	ОчиститьДоговор();

КонецПроцедуры

