<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>J1201209_1 (TAB1)</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>СтавкаНДС</dataPath>
			<field>СтавкаНДС</field>
			<appearance/>
			<inputParameters/>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Сумма</dataPath>
			<field>Сумма</field>
			<appearance/>
			<inputParameters/>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КодУКТВЭД</dataPath>
			<field>КодУКТВЭД</field>
			<appearance/>
			<inputParameters/>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>RXXXXG4S</dataPath>
			<field>ЕдИзмНаименование</field>
			<appearance/>
			<inputParameters/>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>RXXXXG105_2S</dataPath>
			<field>ЕдИзмКод</field>
			<appearance/>
			<inputParameters/>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Количество</dataPath>
			<field>Количество</field>
			<appearance/>
			<inputParameters/>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>RXXXXG009</dataPath>
			<field>КодЛьготы</field>
			<appearance/>
			<inputParameters/>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>RXXXXG3S</dataPath>
			<field>Номенклатура</field>
			<appearance/>
			<inputParameters/>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Цена</dataPath>
			<field>Цена</field>
			<appearance/>
			<inputParameters/>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НеЯвляетсяРезидентом</dataPath>
			<field>НеЯвляетсяРезидентом</field>
			<appearance/>
			<inputParameters/>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВалютаДокумента</dataPath>
			<field>ВалютаДокумента</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дата</dataPath>
			<field>Дата</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>RXXXXG2S</dataPath>
			<field>Причина</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>RXXXXG001</dataPath>
			<field>НомерСтроки</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>RXXXXG32</dataPath>
			<field>ПризнакИмпортного</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>RXXXXG33</dataPath>
			<field>КодДКПП</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НалоговаяНакладная</dataPath>
			<field>НалоговаяНакладная</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>RXXXXG5</dataPath>
			<field>ИзменениеКоличества</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>RXXXXG7</dataPath>
			<field>ИзменениеЦены</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НомерСтрокиДокумента</dataPath>
			<field>НомерСтрокиДокумента</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>uk</v8:lang>
					<v8:content>Номер строки документа</v8:content>
				</v8:item>
			</title>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	ВЫРАЗИТЬ(Приложение2КНалоговойНакладнойТовары.Номенклатура.НаименованиеПолное КАК СТРОКА(1000)) КАК Номенклатура,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойТовары.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ""
		ИНАЧЕ ЕСТЬNULL(Приложение2КНалоговойНакладнойТовары.КодУКТВЭД.Код, "")
	КОНЕЦ КАК КодУКТВЭД,
	Приложение2КНалоговойНакладнойТовары.ЕдиницаИзмерения.Наименование КАК ЕдИзмНаименование,
	Приложение2КНалоговойНакладнойТовары.ЕдиницаИзмерения.Код КАК ЕдИзмКод,
	СУММА(Приложение2КНалоговойНакладнойТовары.Количество) КАК Количество,
	ВЫРАЗИТЬ(ВЫБОР
			КОГДА Приложение2КНалоговойНакладнойТовары.Ссылка.СуммаВключаетНДС
				ТОГДА ВЫБОР
						КОГДА Приложение2КНалоговойНакладнойТовары.Количество = 0
							ТОГДА 0
						ИНАЧЕ (Приложение2КНалоговойНакладнойТовары.Сумма - Приложение2КНалоговойНакладнойТовары.СуммаНДС) / Приложение2КНалоговойНакладнойТовары.Количество
					КОНЕЦ
			ИНАЧЕ Приложение2КНалоговойНакладнойТовары.Цена
		КОНЕЦ КАК ЧИСЛО(15, 2)) КАК Цена,
	СУММА(ВЫБОР
			КОГДА Приложение2КНалоговойНакладнойТовары.Ссылка.СуммаВключаетНДС
				ТОГДА Приложение2КНалоговойНакладнойТовары.ИзменениеСуммы - Приложение2КНалоговойНакладнойТовары.ИзменениеСуммыНДС
			ИНАЧЕ Приложение2КНалоговойНакладнойТовары.ИзменениеСуммы
		КОНЕЦ) КАК Сумма,
	Приложение2КНалоговойНакладнойТовары.СтавкаНДС,
	Приложение2КНалоговойНакладнойТовары.Номенклатура.КодЛьготы КАК КодЛьготы,
	Приложение2КНалоговойНакладнойТовары.Ссылка.ВалютаДокумента,
	Приложение2КНалоговойНакладнойТовары.Ссылка.Контрагент.НеЯвляетсяРезидентом КАК НеЯвляетсяРезидентом,
	Приложение2КНалоговойНакладнойТовары.Ссылка.Дата,
	Приложение2КНалоговойНакладнойТовары.ИзменениеЦены КАК ИзменениеЦены,
	Приложение2КНалоговойНакладнойТовары.ИзменениеКоличества,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойТовары.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодТовараИмпортированного)
			ТОГДА 1
		ИНАЧЕ ""
	КОНЕЦ КАК ПризнакИмпортного,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойТовары.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ЕСТЬNULL(Приложение2КНалоговойНакладнойТовары.КодУКТВЭД.Код, "")
		ИНАЧЕ ""
	КОНЕЦ КАК КодДКПП,
	Приложение2КНалоговойНакладнойТовары.Причина,
	Приложение2КНалоговойНакладнойТовары.Ссылка.НалоговаяНакладная,
	Приложение2КНалоговойНакладнойТовары.Ссылка.ВидОперации,
	Приложение2КНалоговойНакладнойТовары.Ссылка.НалоговаяНакладная.Сводная,
	Приложение2КНалоговойНакладнойТовары.НомерСтроки,
	Приложение2КНалоговойНакладнойТовары.НомерСтрокиНН
ПОМЕСТИТЬ ВТ_Подготовленная
ИЗ
	Документ.Приложение2КНалоговойНакладной.Товары КАК Приложение2КНалоговойНакладнойТовары
ГДЕ
	Приложение2КНалоговойНакладнойТовары.Ссылка = &amp;Ссылка

СГРУППИРОВАТЬ ПО
	Приложение2КНалоговойНакладнойТовары.ЕдиницаИзмерения.Код,
	Приложение2КНалоговойНакладнойТовары.ЕдиницаИзмерения.Наименование,
	Приложение2КНалоговойНакладнойТовары.Номенклатура.КодЛьготы,
	Приложение2КНалоговойНакладнойТовары.СтавкаНДС,
	ВЫРАЗИТЬ(ВЫБОР
			КОГДА Приложение2КНалоговойНакладнойТовары.Ссылка.СуммаВключаетНДС
				ТОГДА ВЫБОР
						КОГДА Приложение2КНалоговойНакладнойТовары.Количество = 0
							ТОГДА 0
						ИНАЧЕ (Приложение2КНалоговойНакладнойТовары.Сумма - Приложение2КНалоговойНакладнойТовары.СуммаНДС) / Приложение2КНалоговойНакладнойТовары.Количество
					КОНЕЦ
			ИНАЧЕ Приложение2КНалоговойНакладнойТовары.Цена
		КОНЕЦ КАК ЧИСЛО(15, 2)),
	Приложение2КНалоговойНакладнойТовары.Ссылка.ВалютаДокумента,
	Приложение2КНалоговойНакладнойТовары.Ссылка.Контрагент.НеЯвляетсяРезидентом,
	Приложение2КНалоговойНакладнойТовары.Ссылка.Дата,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойТовары.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодТовараИмпортированного)
			ТОГДА 1
		ИНАЧЕ ""
	КОНЕЦ,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойТовары.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ""
		ИНАЧЕ ЕСТЬNULL(Приложение2КНалоговойНакладнойТовары.КодУКТВЭД.Код, "")
	КОНЕЦ,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойТовары.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ЕСТЬNULL(Приложение2КНалоговойНакладнойТовары.КодУКТВЭД.Код, "")
		ИНАЧЕ ""
	КОНЕЦ,
	ВЫРАЗИТЬ(Приложение2КНалоговойНакладнойТовары.Номенклатура.НаименованиеПолное КАК СТРОКА(1000)),
	Приложение2КНалоговойНакладнойТовары.ИзменениеЦены,
	Приложение2КНалоговойНакладнойТовары.ИзменениеКоличества,
	Приложение2КНалоговойНакладнойТовары.Причина,
	Приложение2КНалоговойНакладнойТовары.Ссылка.НалоговаяНакладная,
	Приложение2КНалоговойНакладнойТовары.Ссылка.ВидОперации,
	Приложение2КНалоговойНакладнойТовары.Ссылка.НалоговаяНакладная.Сводная,
	Приложение2КНалоговойНакладнойТовары.НомерСтроки,
	Приложение2КНалоговойНакладнойТовары.НомерСтрокиНН

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВЫРАЗИТЬ(Приложение2КНалоговойНакладнойУслуги.Номенклатура.НаименованиеПолное КАК СТРОКА(1000)),
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойУслуги.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ""
		ИНАЧЕ Приложение2КНалоговойНакладнойУслуги.КодУКТВЭД.Код
	КОНЕЦ,
	Приложение2КНалоговойНакладнойУслуги.Номенклатура.БазоваяЕдиницаИзмерения.Наименование,
	Приложение2КНалоговойНакладнойУслуги.Номенклатура.БазоваяЕдиницаИзмерения.Код,
	СУММА(Приложение2КНалоговойНакладнойУслуги.Количество),
	ВЫРАЗИТЬ(ВЫБОР
			КОГДА Приложение2КНалоговойНакладнойУслуги.Ссылка.СуммаВключаетНДС
				ТОГДА ВЫБОР
						КОГДА Приложение2КНалоговойНакладнойУслуги.Количество = 0
							ТОГДА 0
						ИНАЧЕ (Приложение2КНалоговойНакладнойУслуги.Сумма - Приложение2КНалоговойНакладнойУслуги.СуммаНДС) / Приложение2КНалоговойНакладнойУслуги.Количество
					КОНЕЦ
			ИНАЧЕ Приложение2КНалоговойНакладнойУслуги.Цена
		КОНЕЦ КАК ЧИСЛО(15, 2)),
	СУММА(ВЫБОР
			КОГДА Приложение2КНалоговойНакладнойУслуги.Ссылка.СуммаВключаетНДС
				ТОГДА Приложение2КНалоговойНакладнойУслуги.Сумма - Приложение2КНалоговойНакладнойУслуги.СуммаНДС
			ИНАЧЕ Приложение2КНалоговойНакладнойУслуги.ИзменениеСуммы
		КОНЕЦ),
	Приложение2КНалоговойНакладнойУслуги.СтавкаНДС,
	Приложение2КНалоговойНакладнойУслуги.Номенклатура.КодЛьготы,
	Приложение2КНалоговойНакладнойУслуги.Ссылка.ВалютаДокумента,
	Приложение2КНалоговойНакладнойУслуги.Ссылка.Контрагент.НеЯвляетсяРезидентом,
	Приложение2КНалоговойНакладнойУслуги.Ссылка.Дата,
	Приложение2КНалоговойНакладнойУслуги.ИзменениеЦены,
	Приложение2КНалоговойНакладнойУслуги.ИзменениеКоличества,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойУслуги.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодТовараИмпортированного)
			ТОГДА 1
		ИНАЧЕ ""
	КОНЕЦ,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойУслуги.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ЕСТЬNULL(Приложение2КНалоговойНакладнойУслуги.КодУКТВЭД.Код, "")
		ИНАЧЕ ""
	КОНЕЦ,
	Приложение2КНалоговойНакладнойУслуги.Причина,
	Приложение2КНалоговойНакладнойУслуги.Ссылка.НалоговаяНакладная,
	Приложение2КНалоговойНакладнойУслуги.Ссылка.ВидОперации,
	Приложение2КНалоговойНакладнойУслуги.Ссылка.НалоговаяНакладная.Сводная,
	Приложение2КНалоговойНакладнойУслуги.НомерСтроки,
	Приложение2КНалоговойНакладнойУслуги.НомерСтрокиНН
ИЗ
	Документ.Приложение2КНалоговойНакладной.Услуги КАК Приложение2КНалоговойНакладнойУслуги
ГДЕ
	Приложение2КНалоговойНакладнойУслуги.Ссылка = &amp;Ссылка

СГРУППИРОВАТЬ ПО
	Приложение2КНалоговойНакладнойУслуги.Номенклатура.КодЛьготы,
	Приложение2КНалоговойНакладнойУслуги.СтавкаНДС,
	ВЫРАЗИТЬ(ВЫБОР
			КОГДА Приложение2КНалоговойНакладнойУслуги.Ссылка.СуммаВключаетНДС
				ТОГДА ВЫБОР
						КОГДА Приложение2КНалоговойНакладнойУслуги.Количество = 0
							ТОГДА 0
						ИНАЧЕ (Приложение2КНалоговойНакладнойУслуги.Сумма - Приложение2КНалоговойНакладнойУслуги.СуммаНДС) / Приложение2КНалоговойНакладнойУслуги.Количество
					КОНЕЦ
			ИНАЧЕ Приложение2КНалоговойНакладнойУслуги.Цена
		КОНЕЦ КАК ЧИСЛО(15, 2)),
	Приложение2КНалоговойНакладнойУслуги.Ссылка.ВалютаДокумента,
	Приложение2КНалоговойНакладнойУслуги.Ссылка.Контрагент.НеЯвляетсяРезидентом,
	Приложение2КНалоговойНакладнойУслуги.Ссылка.Дата,
	Приложение2КНалоговойНакладнойУслуги.Номенклатура.БазоваяЕдиницаИзмерения.Код,
	Приложение2КНалоговойНакладнойУслуги.Номенклатура.БазоваяЕдиницаИзмерения.Наименование,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойУслуги.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодТовараИмпортированного)
			ТОГДА 1
		ИНАЧЕ ""
	КОНЕЦ,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойУслуги.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ""
		ИНАЧЕ Приложение2КНалоговойНакладнойУслуги.КодУКТВЭД.Код
	КОНЕЦ,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойУслуги.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ЕСТЬNULL(Приложение2КНалоговойНакладнойУслуги.КодУКТВЭД.Код, "")
		ИНАЧЕ ""
	КОНЕЦ,
	ВЫРАЗИТЬ(Приложение2КНалоговойНакладнойУслуги.Номенклатура.НаименованиеПолное КАК СТРОКА(1000)),
	Приложение2КНалоговойНакладнойУслуги.ИзменениеЦены,
	Приложение2КНалоговойНакладнойУслуги.ИзменениеКоличества,
	Приложение2КНалоговойНакладнойУслуги.Причина,
	Приложение2КНалоговойНакладнойУслуги.Ссылка.НалоговаяНакладная,
	Приложение2КНалоговойНакладнойУслуги.Ссылка.ВидОперации,
	Приложение2КНалоговойНакладнойУслуги.Ссылка.НалоговаяНакладная.Сводная,
	Приложение2КНалоговойНакладнойУслуги.НомерСтроки,
	Приложение2КНалоговойНакладнойУслуги.НомерСтрокиНН

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВЫРАЗИТЬ(Приложение2КНалоговойНакладнойОС.ОсновноеСредство.НаименованиеПолное КАК СТРОКА(1000)),
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойОС.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ""
		ИНАЧЕ Приложение2КНалоговойНакладнойОС.КодУКТВЭД.Код
	КОНЕЦ,
	"шт",
	"2009",
	NULL,
	NULL,
	СУММА(ВЫБОР
			КОГДА Приложение2КНалоговойНакладнойОС.Ссылка.СуммаВключаетНДС
				ТОГДА Приложение2КНалоговойНакладнойОС.Сумма - Приложение2КНалоговойНакладнойОС.СуммаНДС
			ИНАЧЕ Приложение2КНалоговойНакладнойОС.ИзменениеСуммы
		КОНЕЦ),
	Приложение2КНалоговойНакладнойОС.СтавкаНДС,
	"",
	Приложение2КНалоговойНакладнойОС.Ссылка.ВалютаДокумента,
	Приложение2КНалоговойНакладнойОС.Ссылка.Контрагент.НеЯвляетсяРезидентом,
	Приложение2КНалоговойНакладнойОС.Ссылка.Дата,
	Приложение2КНалоговойНакладнойОС.ИзменениеЦены,
	Приложение2КНалоговойНакладнойОС.ИзменениеКоличества,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойОС.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодТовараИмпортированного)
			ТОГДА 1
		ИНАЧЕ ""
	КОНЕЦ,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойОС.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ЕСТЬNULL(Приложение2КНалоговойНакладнойОС.КодУКТВЭД.Код, "")
		ИНАЧЕ ""
	КОНЕЦ,
	Приложение2КНалоговойНакладнойОС.Причина,
	Приложение2КНалоговойНакладнойОС.Ссылка.НалоговаяНакладная,
	Приложение2КНалоговойНакладнойОС.Ссылка.ВидОперации,
	Приложение2КНалоговойНакладнойОС.Ссылка.НалоговаяНакладная.Сводная,
	Приложение2КНалоговойНакладнойОС.НомерСтроки,
	Приложение2КНалоговойНакладнойОС.НомерСтрокиНН
ИЗ
	Документ.Приложение2КНалоговойНакладной.ОС КАК Приложение2КНалоговойНакладнойОС
ГДЕ
	Приложение2КНалоговойНакладнойОС.Ссылка = &amp;Ссылка

СГРУППИРОВАТЬ ПО
	Приложение2КНалоговойНакладнойОС.СтавкаНДС,
	Приложение2КНалоговойНакладнойОС.Ссылка.ВалютаДокумента,
	Приложение2КНалоговойНакладнойОС.Ссылка.Контрагент.НеЯвляетсяРезидентом,
	Приложение2КНалоговойНакладнойОС.Ссылка.Дата,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойОС.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодТовараИмпортированного)
			ТОГДА 1
		ИНАЧЕ ""
	КОНЕЦ,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойОС.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ""
		ИНАЧЕ Приложение2КНалоговойНакладнойОС.КодУКТВЭД.Код
	КОНЕЦ,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойОС.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ЕСТЬNULL(Приложение2КНалоговойНакладнойОС.КодУКТВЭД.Код, "")
		ИНАЧЕ ""
	КОНЕЦ,
	ВЫРАЗИТЬ(Приложение2КНалоговойНакладнойОС.ОсновноеСредство.НаименованиеПолное КАК СТРОКА(1000)),
	Приложение2КНалоговойНакладнойОС.ИзменениеЦены,
	Приложение2КНалоговойНакладнойОС.ИзменениеКоличества,
	Приложение2КНалоговойНакладнойОС.Причина,
	Приложение2КНалоговойНакладнойОС.Ссылка.НалоговаяНакладная,
	Приложение2КНалоговойНакладнойОС.Ссылка.ВидОперации,
	Приложение2КНалоговойНакладнойОС.Ссылка.НалоговаяНакладная.Сводная,
	Приложение2КНалоговойНакладнойОС.НомерСтроки,
	Приложение2КНалоговойНакладнойОС.НомерСтрокиНН

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВЫРАЗИТЬ(Приложение2КНалоговойНакладнойНМА.НематериальныйАктив.НаименованиеПолное КАК СТРОКА(1000)),
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойНМА.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ""
		ИНАЧЕ Приложение2КНалоговойНакладнойНМА.КодУКТВЭД.Код
	КОНЕЦ,
	"шт",
	"2009",
	NULL,
	NULL,
	СУММА(ВЫБОР
			КОГДА Приложение2КНалоговойНакладнойНМА.Ссылка.СуммаВключаетНДС
				ТОГДА Приложение2КНалоговойНакладнойНМА.Сумма - Приложение2КНалоговойНакладнойНМА.СуммаНДС
			ИНАЧЕ Приложение2КНалоговойНакладнойНМА.ИзменениеСуммы
		КОНЕЦ),
	Приложение2КНалоговойНакладнойНМА.СтавкаНДС,
	"",
	Приложение2КНалоговойНакладнойНМА.Ссылка.ВалютаДокумента,
	Приложение2КНалоговойНакладнойНМА.Ссылка.Контрагент.НеЯвляетсяРезидентом,
	Приложение2КНалоговойНакладнойНМА.Ссылка.Дата,
	Приложение2КНалоговойНакладнойНМА.ИзменениеЦены,
	Приложение2КНалоговойНакладнойНМА.ИзменениеКоличества,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойНМА.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодТовараИмпортированного)
			ТОГДА 1
		ИНАЧЕ ""
	КОНЕЦ,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойНМА.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ЕСТЬNULL(Приложение2КНалоговойНакладнойНМА.КодУКТВЭД.Код, "")
		ИНАЧЕ ""
	КОНЕЦ,
	Приложение2КНалоговойНакладнойНМА.Причина,
	Приложение2КНалоговойНакладнойНМА.Ссылка.НалоговаяНакладная,
	Приложение2КНалоговойНакладнойНМА.Ссылка.ВидОперации,
	Приложение2КНалоговойНакладнойНМА.Ссылка.НалоговаяНакладная.Сводная,
	Приложение2КНалоговойНакладнойНМА.НомерСтроки,
	Приложение2КНалоговойНакладнойНМА.НомерСтрокиНН
ИЗ
	Документ.Приложение2КНалоговойНакладной.НМА КАК Приложение2КНалоговойНакладнойНМА
ГДЕ
	Приложение2КНалоговойНакладнойНМА.Ссылка = &amp;Ссылка

СГРУППИРОВАТЬ ПО
	Приложение2КНалоговойНакладнойНМА.СтавкаНДС,
	Приложение2КНалоговойНакладнойНМА.Ссылка.ВалютаДокумента,
	Приложение2КНалоговойНакладнойНМА.Ссылка.Контрагент.НеЯвляетсяРезидентом,
	Приложение2КНалоговойНакладнойНМА.Ссылка.Дата,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойНМА.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодТовараИмпортированного)
			ТОГДА 1
		ИНАЧЕ ""
	КОНЕЦ,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойНМА.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ""
		ИНАЧЕ Приложение2КНалоговойНакладнойНМА.КодУКТВЭД.Код
	КОНЕЦ,
	ВЫБОР
		КОГДА Приложение2КНалоговойНакладнойНМА.КодУКТВЭД.Вид = ЗНАЧЕНИЕ(Перечисление.ВидыКодовДляНалоговойНакладной.КодУслуги)
			ТОГДА ЕСТЬNULL(Приложение2КНалоговойНакладнойНМА.КодУКТВЭД.Код, "")
		ИНАЧЕ ""
	КОНЕЦ,
	ВЫРАЗИТЬ(Приложение2КНалоговойНакладнойНМА.НематериальныйАктив.НаименованиеПолное КАК СТРОКА(1000)),
	Приложение2КНалоговойНакладнойНМА.ИзменениеЦены,
	Приложение2КНалоговойНакладнойНМА.ИзменениеКоличества,
	Приложение2КНалоговойНакладнойНМА.Причина,
	Приложение2КНалоговойНакладнойНМА.Ссылка.НалоговаяНакладная,
	Приложение2КНалоговойНакладнойНМА.Ссылка.ВидОперации,
	Приложение2КНалоговойНакладнойНМА.Ссылка.НалоговаяНакладная.Сводная,
	Приложение2КНалоговойНакладнойНМА.НомерСтроки,
	Приложение2КНалоговойНакладнойНМА.НомерСтрокиНН
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_Подготовленная.Номенклатура,
	ВЫБОР
		КОГДА ВТ_Подготовленная.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПриложение2КНалоговойНакладной.УсловнаяПродажаВозврат)
				И ВТ_Подготовленная.НалоговаяНакладнаяСводная
			ТОГДА ""
		ИНАЧЕ ВТ_Подготовленная.КодУКТВЭД
	КОНЕЦ КАК КодУКТВЭД,
	ВЫБОР
		КОГДА ВТ_Подготовленная.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПриложение2КНалоговойНакладной.УсловнаяПродажаВозврат)
				И ВТ_Подготовленная.НалоговаяНакладнаяСводная
			ТОГДА "грн"
		ИНАЧЕ ВТ_Подготовленная.ЕдИзмНаименование
	КОНЕЦ КАК ЕдИзмНаименование,
	ВЫБОР
		КОГДА ВТ_Подготовленная.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПриложение2КНалоговойНакладной.УсловнаяПродажаВозврат)
				И ВТ_Подготовленная.НалоговаяНакладнаяСводная
			ТОГДА ""
		ИНАЧЕ ВТ_Подготовленная.ЕдИзмКод
	КОНЕЦ КАК ЕдИзмКод,
	ВЫБОР
		КОГДА ВТ_Подготовленная.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПриложение2КНалоговойНакладной.УсловнаяПродажаВозврат)
				И ВТ_Подготовленная.НалоговаяНакладнаяСводная
			ТОГДА 0
		ИНАЧЕ ВТ_Подготовленная.Количество
	КОНЕЦ КАК Количество,
	ВЫБОР
		КОГДА ВТ_Подготовленная.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПриложение2КНалоговойНакладной.УсловнаяПродажаВозврат)
				И ВТ_Подготовленная.НалоговаяНакладнаяСводная
			ТОГДА 0
		ИНАЧЕ ВТ_Подготовленная.Цена
	КОНЕЦ КАК Цена,
	ВТ_Подготовленная.Сумма,
	ВЫБОР
		КОГДА ВТ_Подготовленная.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПриложение2КНалоговойНакладной.УсловнаяПродажаВозврат)
				И ВТ_Подготовленная.НалоговаяНакладнаяСводная
			ТОГДА ""
		ИНАЧЕ ВТ_Подготовленная.СтавкаНДС
	КОНЕЦ КАК СтавкаНДС,
	ВЫБОР
		КОГДА ВТ_Подготовленная.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПриложение2КНалоговойНакладной.УсловнаяПродажаВозврат)
				И ВТ_Подготовленная.НалоговаяНакладнаяСводная
			ТОГДА ""
		ИНАЧЕ ВТ_Подготовленная.КодЛьготы
	КОНЕЦ КАК КодЛьготы,
	ВТ_Подготовленная.ВалютаДокумента,
	ВТ_Подготовленная.НеЯвляетсяРезидентом,
	ВТ_Подготовленная.Дата,
	ВЫБОР
		КОГДА ВТ_Подготовленная.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПриложение2КНалоговойНакладной.УсловнаяПродажаВозврат)
				И ВТ_Подготовленная.НалоговаяНакладнаяСводная
			ТОГДА 0
		ИНАЧЕ ВТ_Подготовленная.ИзменениеЦены
	КОНЕЦ КАК ИзменениеЦены,
	ВЫБОР
		КОГДА ВТ_Подготовленная.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПриложение2КНалоговойНакладной.УсловнаяПродажаВозврат)
				И ВТ_Подготовленная.НалоговаяНакладнаяСводная
			ТОГДА ""
		ИНАЧЕ ВТ_Подготовленная.ИзменениеКоличества
	КОНЕЦ КАК ИзменениеКоличества,
	ВТ_Подготовленная.Причина,
	ВЫБОР
		КОГДА ВТ_Подготовленная.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПриложение2КНалоговойНакладной.УсловнаяПродажаВозврат)
				И ВТ_Подготовленная.НалоговаяНакладнаяСводная
			ТОГДА ""
		ИНАЧЕ ВТ_Подготовленная.ПризнакИмпортного
	КОНЕЦ КАК ПризнакИмпортного,
	ВЫБОР
		КОГДА ВТ_Подготовленная.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПриложение2КНалоговойНакладной.УсловнаяПродажаВозврат)
				И ВТ_Подготовленная.НалоговаяНакладнаяСводная
			ТОГДА ""
		ИНАЧЕ ВТ_Подготовленная.КодДКПП
	КОНЕЦ КАК КодДКПП,
	ВТ_Подготовленная.НалоговаяНакладная,
	ВЫБОР
		КОГДА ВТ_Подготовленная.НомерСтрокиНН = 0
			ТОГДА ""
		ИНАЧЕ ВТ_Подготовленная.НомерСтрокиНН
	КОНЕЦ КАК НомерСтроки,
	ВТ_Подготовленная.НомерСтроки КАК НомерСтрокиДокумента
ИЗ
	ВТ_Подготовленная КАК ВТ_Подготовленная</query>
	</dataSet>
	<calculatedField>
		<dataPath>RXXXXG008</dataPath>
		<expression>Выбор 
   Когда СтавкаНДС = "" 
     Тогда "" 
   Когда СтавкаНДС = Значение(Перечисление.СтавкиНДС.НДС0) 
     Тогда 
        Выбор 
           Когда Не ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить() 
               ИЛИ НеЯвляетсяРезидентом 
               Тогда "901" 
               Иначе "902" 
           Конец 
   Когда СтавкаНДС = Значение(Перечисление.СтавкиНДС.БезНДС) 
     Тогда "903"
   Когда СтавкаНДС = Значение(Перечисление.СтавкиНДС.НДС7) 
     Тогда 
        Выбор 
           Когда Дата &gt;= глЗначениеПеременной("ДатаНачалаИспользованияФормыННПоЛекарствам")
              Тогда "7" 
           Иначе "902" 
         Конец 
    Иначе "20" 
 Конец</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>uk</v8:lang>
				<v8:content>RXXXXG008</v8:content>
			</v8:item>
		</title>
	</calculatedField>
	<calculatedField>
		<dataPath>RXXXXG6</dataPath>
		<expression>Выбор Когда RXXXXG5 = 0 Тогда 0 Иначе Цена Конец</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>uk</v8:lang>
				<v8:content>RXXXXG6</v8:content>
			</v8:item>
		</title>
	</calculatedField>
	<calculatedField>
		<dataPath>RXXXXG8</dataPath>
		<expression>Выбор Когда RXXXXG7 = 0 Тогда 0 Иначе Количество Конец</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>uk</v8:lang>
				<v8:content>RXXXXG8</v8:content>
			</v8:item>
		</title>
	</calculatedField>
	<calculatedField>
		<dataPath>RXXXXG010</dataPath>
		<expression>Формат(Сумма, "ЧДЦ=2; ЧРД=.; ЧГ=0")</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>uk</v8:lang>
				<v8:content>RXXXXG010</v8:content>
			</v8:item>
		</title>
	</calculatedField>
	<calculatedField>
		<dataPath>RXXXXG4</dataPath>
		<expression>скEDI_ОбщегоНазначенияКлиентСервер.скEDI_УдалитьПробелы(КодУКТВЭД)</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>uk</v8:lang>
				<v8:content>RXXXXG4</v8:content>
			</v8:item>
		</title>
	</calculatedField>
	<parameter>
		<name>Ссылка</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>uk</v8:lang>
				<v8:content>Ссылка</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:DocumentRef.НалоговаяНакладная</v8:Type>
		</valueType>
		<value xsi:type="dcscor:DesignTimeValue">Документ.НалоговаяНакладная.ПустаяСсылка</value>
		<useRestriction>false</useRestriction>
		<use>Always</use>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="xs:string">Основний</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RXXXXG009</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RXXXXG010</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RXXXXG105_2S</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RXXXXG3S</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RXXXXG4</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RXXXXG4S</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RXXXXG6</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RXXXXG008</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RXXXXG8</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RXXXXG7</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RXXXXG5</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RXXXXG001</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RXXXXG2S</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RXXXXG32</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RXXXXG33</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Ссылка</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">00000000-0000-0000-0000-000000000000</dcscor:value>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:order>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>НомерСтрокиДокумента</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
			</dcsset:order>
			<dcsset:outputParameters/>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
				<dcsset:outputParameters/>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>