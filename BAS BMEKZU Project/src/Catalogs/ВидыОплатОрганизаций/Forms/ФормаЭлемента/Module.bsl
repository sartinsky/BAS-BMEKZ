
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриЧтенииНаСервере(ТекущийОбъект)

	// СтандартныеПодсистемы.УправлениеДоступом
	Если ОбщегоНазначения.ПодсистемаСуществует("СтандартныеПодсистемы.УправлениеДоступом") Тогда
		МодульУправлениеДоступом = ОбщегоНазначения.ОбщийМодуль("УправлениеДоступом");
		МодульУправлениеДоступом.ПриЧтенииНаСервере(ЭтотОбъект, ТекущийОбъект);
	КонецЕсли;
	// Конец СтандартныеПодсистемы.УправлениеДоступом

КонецПроцедуры

#КонецОбласти

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	Если НЕ ЗначениеЗаполнено(Объект.Ссылка) Тогда
		Объект.СчетДеньгиВПути = ПланыСчетов.Хозрасчетный.ДенежныеСредстваВПутиВНациональнойВалюте;
	КонецЕсли;
	
    ВидыДоговоровКонтрагентов = Перечисления.ВидыДоговоровКонтрагентов.Прочее;
	ТипыОплатНаличные = Перечисления.ТипыОплат.Наличные;
	
КонецПроцедуры

&НаКлиенте
// Процедура управляет видимостью формы.
//
Процедура УстановитьДоступность()

	Если Объект.ТипОплаты = ТипыОплатНаличные Тогда
		Элементы.ПанельКонтрагента.Доступность = Ложь;
	Иначе
		Элементы.ПанельКонтрагента.Доступность = Истина;
	КонецЕсли;

КонецПроцедуры // УстановитьВидимость()

&НаКлиенте
Процедура ТипОплатыПриИзменении(Элемент)
	
	УстановитьДоступность();

КонецПроцедуры

&НаСервере
Процедура КонтрагентПриИзмененииСервер()
	
	СписокВидовДоговоров = Новый СписокЗначений;
	СписокВидовДоговоров.Добавить(ВидыДоговоровКонтрагентов);
	БухгалтерскийУчетПереопределяемый.УстановитьДоговорКонтрагента(Объект.ДоговорКонтрагента, Объект.Контрагент, Объект.Организация, СписокВидовДоговоров);

КонецПроцедуры

&НаКлиенте
Процедура КонтрагентПриИзменении(Элемент)
	
	КонтрагентПриИзмененииСервер();

КонецПроцедуры

&НаСервере
Процедура ДоговорКонтрагентаПриИзмененииСервер()
	
	Если Объект.ДоговорКонтрагента.Владелец <> Объект.Контрагент Тогда
		Объект.Контрагент = Объект.ДоговорКонтрагента.Владелец;
	КонецЕсли;

КонецПроцедуры

&НаКлиенте
Процедура ДоговорКонтрагентаПриИзменении(Элемент)
	
	ДоговорКонтрагентаПриИзмененииСервер()
	
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	УстановитьДоступность();
	
КонецПроцедуры

