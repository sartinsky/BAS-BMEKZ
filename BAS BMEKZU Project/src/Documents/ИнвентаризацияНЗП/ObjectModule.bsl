#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ И ФУНКЦИИ ОБЩЕГО НАЗНАЧЕНИЯ
//

Процедура ЗаполнитьПоДокументуОснованию(Основание)

	// Заполним реквизиты из стандартного набора по документу основанию.
	ЗаполнениеДокументов.ЗаполнитьПоОснованию(ЭтотОбъект, Основание);

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ
//

Процедура ОбработкаЗаполнения(ДанныеЗаполнения, СтандартнаяОбработка)

	ТипДанныхЗаполнения = ТипЗнч(ДанныеЗаполнения);
	Если ДанныеЗаполнения <> Неопределено
			И ТипДанныхЗаполнения <> Тип("Структура")
			И Метаданные().ВводитсяНаОсновании.Содержит(ДанныеЗаполнения.Метаданные()) Тогда
		ЗаполнитьПоДокументуОснованию(ДанныеЗаполнения);
	КонецЕсли;
	ЗаполнениеДокументов.Заполнить(ЭтотОбъект, ДанныеЗаполнения);

КонецПроцедуры

Процедура ПриКопировании(ОбъектКопирования)

	Дата = НачалоДня(ОбщегоНазначенияБП.ПолучитьРабочуюДату());
	Ответственный = Пользователи.ТекущийПользователь();

КонецПроцедуры

Процедура ОбработкаПроверкиЗаполнения(Отказ, ПроверяемыеРеквизиты)

	Если ЗначениеЗаполнено(СчетЗатрат) Тогда
		// Счет затрат может быть в списке или в иерархии 231 или 232 (т.е. если создавали субсчета, то ошибки быть не должно)
		Если НЕ (БухгалтерскийУчетВызовСервераПовтИсп.СчетВИерархии(СчетЗатрат, ПланыСчетов.Хозрасчетный.ОсновноеПроизводство)
					ИЛИ БухгалтерскийУчетВызовСервераПовтИсп.СчетВИерархии(СчетЗатрат, ПланыСчетов.Хозрасчетный.ВспомогательныеПроизводства)) Тогда
			ТекстСообщения = НСтр("ru='Счет затрат может быть только 231 или 232';uk='Рахунок витрат може бути лише 231 або 232'");
			ТекстСообщения = ОбщегоНазначенияБПКлиентСервер.ПолучитьТекстСообщения("Поле", "Корректность", НСтр("ru='Счет затрат';uk='Рахунок витрат'"), , , ТекстСообщения);
			ОбщегоНазначенияКлиентСервер.СообщитьПользователю(ТекстСообщения, ЭтотОбъект, "СчетЗатрат", "Объект", Отказ);
		КонецЕсли;
	КонецЕсли;

КонецПроцедуры

#КонецЕсли