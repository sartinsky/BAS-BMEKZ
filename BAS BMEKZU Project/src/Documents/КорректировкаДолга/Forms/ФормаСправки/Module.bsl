
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ЭтаФорма.Заголовок = НСтр("ru='Описание вида операции ""';uk='Опис виду операції ""'") + Строка(Параметры.ВидОперации)+"""";
		
	ВстроеннаяСправка	= ПолучитьТекстВстроеннойСправки(Параметры.ВидОперации);

КонецПроцедуры

&НаСервере
Функция ПолучитьТекстВстроеннойСправки(ВидОперации) Экспорт
	
	МакетПомощника = Документы.КорректировкаДолга.ПолучитьМакет("Справка");
	
	ИндексВидОперации	= Перечисления.ВидыОперацийКорректировкаДолга.Индекс(ВидОперации);
	ИмяОбласти		= "Раздел_" + Метаданные.Перечисления.ВидыОперацийКорректировкаДолга.ЗначенияПеречисления[ИндексВидОперации].Имя;
	
	ОбластьТекстЗаголовок			= ИмяОбласти + "|Заголовок";
	ОбластьТекстаСправки = МакетПомощника.ПолучитьОбласть(ОбластьТекстЗаголовок);
	ТекстЗаголовок = ОбластьТекстаСправки.ТекущаяОбласть.Текст;
	
	ОбластьТекстОбщий			= ИмяОбласти + "|Общий";
	ОбластьТекстаСправки = МакетПомощника.ПолучитьОбласть(ОбластьТекстОбщий);
	ТекстОбщий = ОбластьТекстаСправки.ТекущаяОбласть.Текст;
															  
	ТекстОбщий = "<DIV>" + СтрЗаменить(ТекстОбщий, Символы.ПС, "</DIV>" + Символы.ПС + "<DIV>") + "</DIV>";

 	ТекстВстроеннойСправки = Документы.КорректировкаДолга.ПолучитьМакет("ШаблонВстроеннойСправки").ПолучитьТекст();

	ТекстВстроеннойСправки = СтрЗаменить(ТекстВстроеннойСправки, "%header%", ТекстЗаголовок);
	ТекстВстроеннойСправки = СтрЗаменить(ТекстВстроеннойСправки, "%text%", ТекстОбщий);

	Возврат ТекстВстроеннойСправки;
	
КонецФункции

