////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ДЕЙСТВИЯ КОМАНДНЫХ ПАНЕЛЕЙ ФОРМЫ

&НаКлиенте
Процедура КомандаОК(Команда)

	ПараметрЗакрытия = Новый Структура;
	ПараметрЗакрытия.Вставить("ВводитьОстаткиЗапасовВРазрезеДатОприходования", ВводитьОстаткиЗапасовВРазрезеДатОприходования);
	ПараметрЗакрытия.Вставить("ВводитьОстаткиЗапасовВРазрезеПоставщиков", ВводитьОстаткиЗапасовВРазрезеПоставщиков);
	ПараметрЗакрытия.Вставить("ВводитьСуммыУлучшенияВключенныеВБалансовуюСтоимостьОС", ВводитьСуммыУлучшенияВключенныеВБалансовуюСтоимостьОС);
	ПараметрЗакрытия.Вставить("ДатаВводаОстатков", ДатаВводаОстатков);

	Закрыть(ПараметрЗакрытия);

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	ВстроеннаяСправка = Документы.ВводНачальныхОстатков.ПолучитьТекстВстроеннойСправки("НастройкаРежима",Параметры.Организация, НачалоМесяца(Параметры.Дата));

	Организация                                           = Параметры.Организация;
	ВводитьСуммыУлучшенияВключенныеВБалансовуюСтоимостьОС = Параметры.ВводитьСуммыУлучшенияВключенныеВБалансовуюСтоимостьОС;
	ДатаВводаОстатков                                     = Параметры.Дата;
	
	Если Параметры.РазделУчета <> Перечисления.РазделыУчетаДляВводаОстатков.ОсновныеСредства 
	   И Параметры.РазделУчета <> Перечисления.РазделыУчетаДляВводаОстатков.ГруппыОСНалоговыйУчет Тогда
	    Элементы.ГруппаВводитьСуммыУлучшенияВключенныеВБалансовуюСтоимостьОС.Видимость = Ложь;
	КонецЕсли; 
	
	мОценкаМПЗПоСредней = УчетнаяПолитика.СпособОценкиМПЗ(Параметры.Организация, НачалоМесяца(Параметры.Дата)) = Перечисления.СпособыОценки.ПоСредней;
	Если мОценкаМПЗПоСредней Тогда
		ВводитьОстаткиЗапасовВРазрезеДатОприходования         = Ложь;
		Элементы.ГруппаВводитьОстаткиЗапасовВРазрезеДатОприходования.Видимость = Ложь;
		ВводитьОстаткиЗапасовВРазрезеПоставщиков              = Ложь;
		Элементы.ГруппаВводитьОстаткиЗапасовВРазрезеПоставщиков.Видимость = Ложь;
	Иначе
		ВводитьОстаткиЗапасовВРазрезеДатОприходования         = Параметры.ВводитьОстаткиЗапасовВРазрезеДатОприходования;
		ВводитьОстаткиЗапасовВРазрезеПоставщиков              = Параметры.ВводитьОстаткиЗапасовВРазрезеПоставщиков;
	КонецЕсли;  

КонецПроцедуры
