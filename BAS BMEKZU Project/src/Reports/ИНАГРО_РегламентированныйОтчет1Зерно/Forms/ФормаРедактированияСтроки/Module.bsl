
&НаКлиенте
Процедура Сохранить(Команда)
    
    Если НЕ ЗначениеЗаполнено(КодСтроки) Тогда
        ОбщегоНазначенияКлиентСервер.СообщитьПользователю(НСтр("ru = 'Не заполнен код строки!'; uk = 'Не заповнений код рядка!'"));
        Возврат;    
    КонецЕсли;
    
    Если НЕ ЗначениеЗаполнено(НаименованиеСтроки) Тогда
        ОбщегоНазначенияКлиентСервер.СообщитьПользователю(НСтр("ru = 'Не заполнено наименование строки!'; uk = 'Не заповнене найменування рядка!'"));    
        Возврат;    
    КонецЕсли; 
    
    СтруктураЗакрытия = Новый Структура("Код,КодСтроки,Наименование,НаименованиеСтроки,Культуры");
    Адрес = СформироватьТаблицуКультурнаСервере();
    СтруктураЗакрытия.Культуры = Адрес;
    ЗаполнитьЗначенияСвойств(СтруктураЗакрытия,ЭтаФорма,,"Культуры");
    Закрыть(СтруктураЗакрытия);
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
    Если Параметры.Свойство("Код") Тогда
        ЗаполнитьЗначенияСвойств(ЭтаФорма,Параметры,"Код,КодСтроки,Наименование,НаименованиеСтроки");
        Культуры.Загрузить(ПолучитьИзВременногоХранилища(Параметры.Культуры));
    КонецЕсли; 
    
КонецПроцедуры

&НаКлиенте
Процедура Отмена(Команда)
    Закрыть();
КонецПроцедуры

&НаСервере
Функция СформироватьТаблицуКультурнаСервере()

    ТаблицаКультур = Культуры.Выгрузить();
    Адрес = ПоместитьВоВременноеХранилище(ТаблицаКультур);
    
    Возврат Адрес;
    
КонецФункции
