#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
		 
	ТаблицаСписка = ЭтаФорма.Параметры.ТабСписокНачислений.Выгрузить();
	НастСписокНачислений.Загрузить(ТаблицаСписка);
	
	ТаблицаВидов = ЭтаФорма.Параметры.ТабВидыНачислений.Выгрузить();
	НастВидыНачислений.Загрузить(ТаблицаВидов);
	
КонецПроцедуры

&НаКлиенте
Процедура ПередЗакрытиемФормы()
	
	Если Модифицированность Тогда
		
		ВладелецФормы.ТабСписокНачислений.Очистить();	
		ВладелецФормы.ТабВидыНачислений.Очистить(); 
				
		Для каждого СтрокаИсточника Из НастСписокНачислений Цикл	
			СтрокаДобавления = ВладелецФормы.ТабСписокНачислений.Добавить();
			ЗаполнитьЗначенияСвойств(СтрокаДобавления, СтрокаИсточника); 	
		КонецЦикла; 
		
		Для каждого СтрокаИсточника Из НастВидыНачислений Цикл	
			СтрокаДобавления = ВладелецФормы.ТабВидыНачислений.Добавить();
			ЗаполнитьЗначенияСвойств(СтрокаДобавления, СтрокаИсточника); 	
		КонецЦикла;
		
	КонецЕсли;	
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ПоУмолчанию(Команда)
	
	ЗаполнитьТаблицыДаннымиПоУмолчанию();

КонецПроцедуры

&НаКлиенте
Процедура Ок(Команда)
	
	ПередЗакрытиемФормы();	
	
	Если Модифицированность Тогда	
		ИзменениеТаблиц = Истина;
	Иначе
		ИзменениеТаблиц = Ложь;
	КонецЕсли;	
	
	Закрыть(ИзменениеТаблиц);
		
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура НастСписокНачисленийПриАктивизацииСтроки(Элемент)
	
	Если Элемент.ТекущиеДанные = Неопределено Тогда	
		Возврат;	
	КонецЕсли;

	ЭлемОтбора =  Элемент.ТекущиеДанные.ПоказателиНачислений;		
	Отбор = Новый ФиксированнаяСтруктура("ПоказателиНачислений", ЭлемОтбора);		
	Элементы.НастВидыНачислений.ОтборСтрок = Отбор;
	
КонецПроцедуры

&НаКлиенте
Процедура НастВидыНачисленийПриИзменении(Элемент)
	
	ПоказНачисл = Элемент.ОтборСтрок.ПоказателиНачислений;
	
	Если Элемент.ТекущиеДанные = Неопределено Тогда	
		Возврат;	
	КонецЕсли;
	
	Если НЕ ЗначениеЗаполнено(Элемент.ТекущиеДанные.ПоказателиНачислений)Тогда
		Элемент.ТекущиеДанные.ПоказателиНачислений = ПоказНачисл;	
	КонецЕсли;
	
	Модифицированность = Истина;
	//Элементы.НастСписокНачислений.ТекущиеДанные.ПолеИзменено = Истина;
		
КонецПроцедуры

&НаКлиенте
Процедура НастВидыНачисленийПриАктивизацииЯчейки(Элемент)
	
	ТекДанные = Элемент.ТекущиеДанные;
	
	Если ТекДанные = Неопределено ИЛИ ТекДанные.ВидыНачислений <> Неопределено Тогда	
		Возврат;	
	КонецЕсли;
	
	НужныйТип = Элементы.НастСписокНачислений.ТекущиеДанные.ТипСтроки; 				
	Элемент.ТекущиеДанные.ВидыНачислений = ПредопределенноеЗначение(НужныйТип);
			
КонецПроцедуры

&НаКлиенте
Процедура ЗаполнитьТаблицыДаннымиПоУмолчанию()
	
	НастСписокНачислений.Очистить();
	НастВидыНачислений.Очистить();	
	
	СписокПараметров = Отчет.КомпоновщикНастроек.Настройки.ПараметрыДанных.ДоступныеПараметры.Элементы;
	
	Для каждого ЭлПарам Из СписокПараметров Цикл
		Ин = СписокПараметров.Индекс(ЭлПарам); 
		
		Если Ин < 5 Тогда
			Продолжить;	
		ИначеЕсли Ин >= 5 И Ин <= 52 Тогда
			
			НоваяСтрока = НастСписокНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = ЭлПарам.Параметр;
			НоваяСтрока.ПолеИзменено = Ложь;	
			НоваяСтрока.ТипСтроки = "ПланВидовРасчета.ИНАГРО_Начисления.ПустаяСсылка";
			НоваяСтрока.ПользИмяПоказателя = ЭлПарам.Заголовок;
			
		ИначеЕсли Ин >= 53 И Ин <= 55 Тогда
			
			НоваяСтрока = НастСписокНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = ЭлПарам.Параметр;
			НоваяСтрока.ПолеИзменено = Ложь;	
			НоваяСтрока.ТипСтроки = "ПланВидовРасчета.ИНАГРО_ВзносыВФонды.ПустаяСсылка";
			НоваяСтрока.ПользИмяПоказателя = ЭлПарам.Заголовок;

		ИначеЕсли Ин >= 56 И Ин <= 57 Тогда
			
			НоваяСтрока = НастСписокНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = ЭлПарам.Параметр;
			НоваяСтрока.ПолеИзменено = Ложь;	
			НоваяСтрока.ТипСтроки = "ПланВидовРасчета.ИНАГРО_Удержания.ПустаяСсылка";
			НоваяСтрока.ПользИмяПоказателя = ЭлПарам.Заголовок;

		КонецЕсли;				
	КонецЦикла; 	

	// Заполнение таблицы ВидыНачислений			
	Для каждого Строка Из НастСписокНачислений Цикл
		Если Строка.ПоказателиНачислений = "ТарифнаяСтавкаОклад" Тогда
			 
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.ОкладПоДням");

			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.ОкладПоЧасам");

			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.ТарифДневной");

			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.ТарифЧасовой");

			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.БригадныйНаряд");

			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.СдельныйНаряд");
			
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.ПутевыеЛисты");
	
		ИначеЕсли Строка.ПоказателиНачислений = "ОплатаТрудаВКомандировке" Тогда

			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.Командировка");
			
		ИначеЕсли Строка.ПоказателиНачислений = "ПользовательскоеПоле_Премия" Тогда

			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.Месячная");
			
		ИначеЕсли Строка.ПоказателиНачислений = "ИндексацияЗарплаты" Тогда

			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.ИндексацияЗарплаты");
			
		ИначеЕсли Строка.ПоказателиНачислений = "СовмещениеПрофессий" Тогда
	
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.Совмещение");
			
		ИначеЕсли Строка.ПоказателиНачислений = "ВыполнениеОбязанностейВременноОтсутствующегоРаботника" Тогда
			
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.Замещение");

		ИначеЕсли Строка.ПоказателиНачислений = "РаботаВТяжелыхВредныхУсловиях" Тогда
		
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.ДоплатаЗаВредность");

		ИначеЕсли Строка.ПоказателиНачислений = "ИнтенсивностьТруда" Тогда

			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.ДоплатаЗаИнтенсивность");

		ИначеЕсли Строка.ПоказателиНачислений = "РаботаВНочноеВремя" Тогда

			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.ДоплатаЗаНочныеЧасы");

		ИначеЕсли Строка.ПоказателиНачислений = "КлассностьВодителямТранспортныхСредств" Тогда
	
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.ДоплатаЗаКлассность");

		ИначеЕсли Строка.ПоказателиНачислений = "ПомощьИДругиеВыплатыЗаСчетФСС" Тогда
	
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.ОплатаПоСреднемуБЛ");
		
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.ОплатаПоСреднемуБЛТравмаНаПроизводстве");
			
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.ОплатаПоСреднемуБЛПоБеременностиИРодам");

		ИначеЕсли Строка.ПоказателиНачислений = "БольничныеЗаСчетПредприятия" Тогда
	
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Начисления.ОплатаПоСреднемуБЛОрганизации");
			
		ИначеЕсли Строка.ПоказателиНачислений = "ПользовательскоеПоле_ЕСВ" Тогда
	
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_ВзносыВФонды.ЕСВ");
			
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_ВзносыВФонды.ЕСВБольничные");
			
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_ВзносыВФонды.ЕСВГПХ");
	
		ИначеЕсли Строка.ПоказателиНачислений = "ПрофсоюзныеВзносы" Тогда
	
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Удержания.ПрофсоюзныйВзнос");
	
		ИначеЕсли Строка.ПоказателиНачислений = "ПользовательскоеПоле_Алименты" Тогда
	
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Удержания.АлиментыПроцентом");
	
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Удержания.АлиментыПроцентомДоПредела");

			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Удержания.АлиментыФиксированнойСуммой");
			
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Удержания.АлиментыФиксированнойСуммойДоПредела");
			
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Удержания.ПочтовыйСбор");
			
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Удержания.ИЛПроцентом");
			
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Удержания.ИЛПроцентомДоПредела");
			
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Удержания.ИЛФиксированнойСуммой");
			
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			НоваяСтрока.ВидыНачислений		 = ПредопределенноеЗначение("ПланВидовРасчета.ИНАГРО_Удержания.ИЛФиксированнойСуммойДоПредела");
			
		Иначе
			
			НоваяСтрока = НастВидыНачислений.Добавить();
			НоваяСтрока.ПоказателиНачислений = Строка.ПоказателиНачислений;
			
		КонецЕсли;		
	КонецЦикла;
		
КонецПроцедуры

#КонецОбласти