
&НаКлиенте
Процедура ПродолжитьПеренос(Команда)
	
	Закрыть(КодФирмы);
	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ТекстФирмы = Параметры.ТекстФирмы;
			
	Для Ном=1 По СтрЧислоСтрок(ТекстФирмы) Цикл
		СтрБазы=СтрПолучитьСтроку(ТекстФирмы,Ном);
		Разд=Найти(СтрБазы,"%#%");
		Код=Лев(СтрБазы,Разд-1);
		Наименование=Прав(СтрБазы,СтрДлина(СтрБазы)-Разд-2);
		
		НоваяСтрока = ТаблицаОрганизаций.Добавить();
		НоваяСтрока.КодФирмы = Код;
		НоваяСтрока.Фирма = Наименование;
	КонецЦикла;
	
	ТаблицаОрганизаций.Сортировать("КодФирмы");
	КодФирмы = ТаблицаОрганизаций[0].КодФирмы;

КонецПроцедуры

&НаКлиенте
Процедура ТаблицаОрганизацийПриАктивизацииСтроки(Элемент)
	КодФирмы = Элемент.ТекущиеДанные.КодФирмы;
КонецПроцедуры
