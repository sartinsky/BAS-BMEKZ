////////////////////////////////////////////////////////////////////////////////
// РеализацияТоваровУслугФормыКлиентСервер: клиентские и серверные процедуры и 
// функции, вызываемые из форм документа "Реализация товаров и услуг".
//  
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// СЛУЖЕБНЫЙ ПРОГРАММНЫЙ ИНТЕРФЕЙС

// ПРОЧИЕ ПРОЦЕДУРЫ И ФУНКЦИИ ФОРМ ДОКУМЕНТА РеализацияТоваровУслуг

Процедура СформироватьНадписьЦеныИВалюта(Форма) Экспорт
	
	Объект = Форма.Объект;
	СтруктураНадписи = Новый Структура(
		"ТипЦен, ВалютаДокумента, Курс, Кратность, ВалютаРегламентированногоУчета",
		Объект.ТипЦен,
		Объект.ВалютаДокумента,
		Объект.КурсВзаиморасчетов,
		Объект.КратностьВзаиморасчетов,
		Форма.ВалютаРегламентированногоУчета);
	Если Форма.ПлательщикНДС Тогда 
		СтруктураНадписи.Вставить("СуммаВключаетНДС", Объект.СуммаВключаетНДС);
		СтруктураНадписи.Вставить("АвторасчетНДС", 	  Объект.АвторасчетНДС);
	КонецЕсли;
	Форма.ЦеныИВалюта = ОбщегоНазначенияБПКлиентСервер.СформироватьНадписьЦеныИВалюта(СтруктураНадписи);
	
КонецПроцедуры 

Функция ИспользуетсяСчетУчетаНДС(ПлательщикНДС, ЭтоКомиссия, Дата) Экспорт
	
	// Для корректного отображения документов введенных еще в редакции 1.1 необходимо анализировать дату документа
	Возврат (НЕ ЭтоКомиссия ИЛИ Дата >='20110101') И ПлательщикНДС;
		
КонецФункции	

Функция ИспользуетсяСчетУчетаНДСПодтвержденный(ПлательщикНДС, ЭтоКомиссия, Дата, СложныйНалоговыйУчет) Экспорт
	
	Возврат ИспользуетсяСчетУчетаНДС(ПлательщикНДС, ЭтоКомиссия, Дата) И (НЕ СложныйНалоговыйУчет ИЛИ (ЭтоКомиссия И Дата >='20110101'));
	
КонецФункции	
