// Проверяет разрешено ли открывать объект по настройка пользователя. 
// Документ
// Отказ.
Процедура ПроверкаРазрешенийПередОткрытием(Форма, Отказ) Экспорт
	Обр = ИНАГРО_ДирективыПрепроцессору.ИНАГРО_ВызовЗащищеннойОбработки("ИНАГРО_КонтрольПроцессовСервер");
	Если Обр <> Неопределено Тогда
		Обр.ПроверкаРазрешенийПередОткрытием(Форма, Отказ);
	Иначе
		Отказ = Истина;
	КонецЕсли;
КонецПроцедуры

// Производит запись в регистр сведений ИНАГРО_КонтрольВеса по накоплению статистической информации о весе тары 
// документ
// Отказ.
Процедура СохранитьЗначенияВесаТары(Документ, Отказ) Экспорт
	Обр = ИНАГРО_ДирективыПрепроцессору.ИНАГРО_ВызовЗащищеннойОбработки("ИНАГРО_КонтрольПроцессовСервер");
	Если Обр <> Неопределено Тогда
		Обр.СохранитьЗначенияВесаТары(Документ, Отказ);
	Иначе
		Отказ = Истина;
	КонецЕсли;
КонецПроцедуры

// Производит очистку регистра сведений ИНАГРО_КонтрольВеса
// документ.
Процедура ОчиститьЗначенияВесаТары(Документ) Экспорт
	Обр = ИНАГРО_ДирективыПрепроцессору.ИНАГРО_ВызовЗащищеннойОбработки("ИНАГРО_КонтрольПроцессовСервер");
	Если Обр <> Неопределено Тогда
		Обр.ОчиститьЗначенияВесаТары(Документ);
	КонецЕсли;
КонецПроцедуры

// Проверка максимальной грузоподъемности весов
//
Функция ПроверитьМаксимальнуюГрузоподъемностьВесов(Вес) Экспорт
	Обр = ИНАГРО_ДирективыПрепроцессору.ИНАГРО_ВызовЗащищеннойОбработки("ИНАГРО_КонтрольПроцессовСервер");
	Если Обр <> Неопределено Тогда
		Возврат Обр.ПроверитьМаксимальнуюГрузоподъемностьВесов(Вес);
	КонецЕсли;
КонецФункции

// Проверка на отрицательное нетто
// ВесБрутто
// ВесТары.
Функция ПроверитьОтрицательноеНетто(ВесБрутто, ВесТары) Экспорт
	Обр = ИНАГРО_ДирективыПрепроцессору.ИНАГРО_ВызовЗащищеннойОбработки("ИНАГРО_КонтрольПроцессовСервер");
	Если Обр <> Неопределено Тогда
		Возврат Обр.ПроверитьОтрицательноеНетто(ВесБрутто, ВесТары);
	КонецЕсли;
КонецФункции

// Контроль изменения веса в ТТН
// документ
// КонтрольноеЗначение
// ТекущееЗначение
Процедура КонтрольИзмененияВесаТТН(Документ, КонтрольноеЗначение, ТекущееЗначение) Экспорт
	Обр = ИНАГРО_ДирективыПрепроцессору.ИНАГРО_ВызовЗащищеннойОбработки("ИНАГРО_КонтрольПроцессовСервер");
	Если Обр <> Неопределено Тогда
		Обр.КонтрольИзмененияВесаТТН(Документ, КонтрольноеЗначение, ТекущееЗначение);
	КонецЕсли;
КонецПроцедуры

// Определяет событие расхождения в весе тары
// Документ
// НаличиеПрицепа.
Процедура КонтрольРасхожденияВесаТары(Документ, НаличиеПрицепа) Экспорт
	Обр = ИНАГРО_ДирективыПрепроцессору.ИНАГРО_ВызовЗащищеннойОбработки("ИНАГРО_КонтрольПроцессовСервер");
	Если Обр <> Неопределено Тогда
		Обр.КонтрольРасхожденияВесаТары(Документ, НаличиеПрицепа);
	КонецЕсли;
КонецПроцедуры

// Проверка приказа на вывоз
// Ссылка
// Отказ.
Процедура КонтрольПриказаНаВывоз(Документ, Отказ) Экспорт
	Обр = ИНАГРО_ДирективыПрепроцессору.ИНАГРО_ВызовЗащищеннойОбработки("ИНАГРО_КонтрольПроцессовСервер");
	Если Обр <> Неопределено Тогда
		Обр.КонтрольПриказаНаВывоз(Документ, Отказ);
	Иначе
		Отказ = Истина;
	КонецЕсли;
КонецПроцедуры

